{"slots":{"0":{"name":"Screen","type":{"events":[],"methods":[]}},"1":{"name":"DB1","type":{"events":[],"methods":[]}},"2":{"name":"MU1","type":{"events":[],"methods":[]}},"3":{"name":"MU2","type":{"events":[],"methods":[]}},"4":{"name":"MU3","type":{"events":[],"methods":[]}},"5":{"name":"MU4","type":{"events":[],"methods":[]}},"6":{"name":"MU5","type":{"events":[],"methods":[]}},"7":{"name":"MU6","type":{"events":[],"methods":[]}},"8":{"name":"MU7","type":{"events":[],"methods":[]}},"9":{"name":"Core","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-3":{"name":"player","type":{"events":[],"methods":[]}},"-2":{"name":"construct","type":{"events":[],"methods":[]}},"-4":{"name":"system","type":{"events":[],"methods":[]}},"-5":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"if amount > 0 then\n    if rate > 0 then\n        local orename = system.getItem(oreId)[\"displayName\"]\n        local newkeyindex = DB1.getNbKeys()\n        DB1.setStringValue(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU1.getLastExtractionPosition()[1] .. \",\" .. MU1.getLastExtractionPosition()[2] .. \",\" .. MU1.getLastExtractionPosition()[3] .. \",\" .. getMasterPlayerId() .. \" - \" .. system.getPlayerName(getMasterPlayerId()))\n        --system.print(orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU1.getLastExtractionPosition()[1] .. \",\" .. MU1.getLastExtractionPosition()[2] .. \",\" .. MU1.getLastExtractionPosition()[3])\n    end\nend","filter":{"args":[{"variable":"*"},{"variable":"*"},{"variable":"*"}],"signature":"calibrated(oreId,amount,rate)","slotKey":"2"},"key":"0"},{"code":"if amount > 0 then\n    if rate > 0 then\n        local orename = system.getItem(oreId)[\"displayName\"]\n        local newkeyindex = DB1.getNbKeys()\n        DB1.setStringValue(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU2.getLastExtractionPosition()[1] .. \",\" .. MU2.getLastExtractionPosition()[2] .. \",\" .. MU2.getLastExtractionPosition()[3] .. \",\" .. system.getMasterPlayerId() .. \" - \" .. system.getPlayerName(system.getMasterPlayerId()))\n        --system.print(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU2.getLastExtractionPosition()[1] .. \",\" .. MU2.getLastExtractionPosition()[2] .. \",\" .. MU2.getLastExtractionPosition()[3] .. \",\" .. system.getMasterPlayerId() .. \" - \" .. system.getPlayerName(system.getMasterPlayerId()))\n    end\nend","filter":{"args":[{"variable":"*"},{"variable":"*"},{"variable":"*"}],"signature":"calibrated(oreId,amount,rate)","slotKey":"3"},"key":"1"},{"code":"if amount > 0 then\n    if rate > 0 then\n        local orename = system.getItem(oreId)[\"displayName\"]\n        local newkeyindex = DB1.getNbKeys()\n        DB1.setStringValue(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU3.getLastExtractionPosition()[1] .. \",\" .. MU3.getLastExtractionPosition()[2] .. \",\" .. MU3.getLastExtractionPosition()[3] .. \",\" .. system.getMasterPlayerId() .. \" - \" .. system.getPlayerName(system.getMasterPlayerId()))\n        system.print(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU2.getLastExtractionPosition()[1] .. \",\" .. MU2.getLastExtractionPosition()[2] .. \",\" .. MU2.getLastExtractionPosition()[3] .. \",\" .. system.getMasterPlayerId() .. \" - \" .. system.getPlayerName(system.getMasterPlayerId()))\n    end\nend","filter":{"args":[{"variable":"*"},{"variable":"*"},{"variable":"*"}],"signature":"calibrated(oreId,amount,rate)","slotKey":"4"},"key":"2"},{"code":"if amount > 0 then\n    if rate > 0 then\n        local orename = system.getItem(oreId)[\"displayName\"]\n        local newkeyindex = DB1.getNbKeys()\n        DB1.setStringValue(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU4.getLastExtractionPosition()[1] .. \",\" .. MU4.getLastExtractionPosition()[2] .. \",\" .. MU4.getLastExtractionPosition()[3] .. \",\" .. system.getMasterPlayerId() .. \" - \" .. system.getPlayerName(system.getMasterPlayerId()))\n        --system.print(orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU2.getLastExtractionPosition()[1] .. \",\" .. MU2.getLastExtractionPosition()[2] .. \",\" .. MU2.getLastExtractionPosition()[3])\n    end\nend","filter":{"args":[{"variable":"*"},{"variable":"*"},{"variable":"*"}],"signature":"calibrated(oreId,amount,rate)","slotKey":"5"},"key":"3"},{"code":"if amount > 0 then\n    if rate > 0 then\n        local orename = system.getItem(oreId)[\"displayName\"]\n        local newkeyindex = DB1.getNbKeys()\n        DB1.setStringValue(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU5.getLastExtractionPosition()[1] .. \",\" .. MU5.getLastExtractionPosition()[2] .. \",\" .. MU5.getLastExtractionPosition()[3] .. \",\" .. system.getMasterPlayerId() .. \" - \" .. system.getPlayerName(system.getMasterPlayerId()))\n        --system.print(orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU2.getLastExtractionPosition()[1] .. \",\" .. MU2.getLastExtractionPosition()[2] .. \",\" .. MU2.getLastExtractionPosition()[3])\n    end\nend","filter":{"args":[{"variable":"*"},{"variable":"*"},{"variable":"*"}],"signature":"calibrated(oreId,amount,rate)","slotKey":"6"},"key":"4"},{"code":"if amount > 0 then\n    if rate > 0 then\n        local orename = system.getItem(oreId)[\"displayName\"]\n        local newkeyindex = DB1.getNbKeys()\n        DB1.setStringValue(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU6.getLastExtractionPosition()[1] .. \",\" .. MU6.getLastExtractionPosition()[2] .. \",\" .. MU6.getLastExtractionPosition()[3] .. \",\" .. system.getMasterPlayerId() .. \" - \" .. system.getPlayerName(system.getMasterPlayerId()))\n        --system.print(orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU2.getLastExtractionPosition()[1] .. \",\" .. MU2.getLastExtractionPosition()[2] .. \",\" .. MU2.getLastExtractionPosition()[3])\n    end\nend","filter":{"args":[{"variable":"*"},{"variable":"*"},{"variable":"*"}],"signature":"calibrated(oreId,amount,rate)","slotKey":"7"},"key":"5"},{"code":"if amount > 0 then\n    if rate > 0 then\n        local orename = system.getItem(oreId)[\"displayName\"]\n        local newkeyindex = DB1.getNbKeys()\n        DB1.setStringValue(newkeyindex + 1, orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU7.getLastExtractionPosition()[1] .. \",\" .. MU7.getLastExtractionPosition()[2] .. \",\" .. MU7.getLastExtractionPosition()[3] .. \",\" .. system.getMasterPlayerId() .. \" - \" .. system.getPlayerName(system.getMasterPlayerId()))\n        --system.print(orename .. \",\" .. amount .. \",\" .. rate .. \",\" .. MU2.getLastExtractionPosition()[1] .. \",\" .. MU2.getLastExtractionPosition()[2] .. \",\" .. MU2.getLastExtractionPosition()[3])\n    end\nend","filter":{"args":[{"variable":"*"},{"variable":"*"},{"variable":"*"}],"signature":"calibrated(oreId,amount,rate)","slotKey":"8"},"key":"6"},{"code":"Screen.activate()\nscreenoutput = Screen.getScriptOutput()\nlastoutput = \"\"\ntickcount = 0\nnomoreunits = 0\nrefreshed = 0\nverbose = 0\nlastinput = \"\"\nScreen.setScriptInput(\"clear\")\nunit.setTimer(\"main\",1/60)","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"7"},{"code":"Screen.setScriptInput(\"clear\")","filter":{"args":[],"signature":"stop()","slotKey":"-1"},"key":"8"},{"code":"screenoutput = Screen.getScriptOutput()\nif screenoutput == lastoutput then\n    --do nothing\nelse\n    if verbose == 1 then\n        system.print(screenoutput)\n    end\n    if string.sub(screenoutput,1,3) == \"Ack\" then\n        local bigger = 0\n        local smaller = 0\n        if refreshed == 1 then\n            bigger = tickcount\n            smaller = tonumber(string.sub(screenoutput,4,string.len(screenoutput)))\n        else\n            smaller = tickcount\n            bigger = tonumber(string.sub(screenoutput,4,string.len(screenoutput)))\n        end\n        if bigger > smaller then\n            --tickcount = tonumber(string.sub(screenoutput,4,string.len(screenoutput)))\n            tickcount = tickcount + 1\n            if tickcount == 2 then\n                if MU1 ~= nil then\n                    local mustatus = MU1.getStatus()\n                    local mutimeleft = MU1.getRemainingTime()\n                    local muoreid = system.getItem(MU1.getActiveOre())[\"locDisplayName\"]\n                    local muoreicon = system.getItem(MU1.getActiveOre())[\"iconPath\"]\n                    local mubaserate = MU1.getBaseRate()\n                    local mueff = MU1.getEfficiency()\n                    local muadjbonus = MU1.getAdjacencyBonus()\n                    local mucalrate = MU1.getCalibrationRate()\n                    local muoptimum = MU1.getOptimalRate()\n                    local muprodrate = MU1.getProductionRate()\n                    local mutimesincecal = MU1.getLastExtractionTime()\n                    local muoretier = system.getItem(MU1.getActiveOre())[\"tier\"]\n                    local MU1string = mustatus .. \",\" .. mutimeleft .. \",\" .. muoreid .. \",\" .. muoreicon .. \",\" .. mubaserate .. \",\" .. mueff .. \",\" .. muadjbonus .. \",\" .. mucalrate .. \",\" .. muoptimum .. \",\" .. muprodrate .. \",\" .. mutimesincecal .. \",\" .. muoretier\n                    Screen.setScriptInput(MU1string)\n                    if verbose == 1 then\n                        system.print(MU1string)\n                    end\n                else\n                    if lastinput == \"\" then\n                        lastinput = \"empty\"\n                        Screen.setScriptInput(lastinput)\n                    else\n                        lastinput = \"\"\n                        Screen.setScriptInput(lastinput)\n                    end\n                    if verbose == 1 then\n                        system.print(lastinput)\n                    end\n                    nomoreunits = 1\n                end\n            end\n\n            if tickcount == 3 then\n                if MU2 ~= nil then\n                    local mustatus = MU2.getStatus()\n                    local mutimeleft = MU2.getRemainingTime()\n                    local muoreid = system.getItem(MU2.getActiveOre())[\"locDisplayName\"]\n                    local muoreicon = system.getItem(MU2.getActiveOre())[\"iconPath\"]\n                    local mubaserate = MU2.getBaseRate()\n                    local mueff = MU2.getEfficiency()\n                    local muadjbonus = MU2.getAdjacencyBonus()\n                    local mucalrate = MU2.getCalibrationRate()\n                    local muoptimum = MU2.getOptimalRate()\n                    local muprodrate = MU2.getProductionRate()\n                    local mutimesincecal = MU2.getLastExtractionTime()\n                    local muoretier = system.getItem(MU1.getActiveOre())[\"tier\"]\n                    local MU2string = mustatus .. \",\" .. mutimeleft .. \",\" .. muoreid .. \",\" .. muoreicon .. \",\" .. mubaserate .. \",\" .. mueff .. \",\" .. muadjbonus .. \",\" .. mucalrate .. \",\" .. muoptimum .. \",\" .. muprodrate .. \",\" .. mutimesincecal .. \",\" .. muoretier\n                    Screen.setScriptInput(MU2string)\n                    if verbose == 1 then\n                        system.print(MU2string)\n                    end\n                else\n                    if lastinput == \"\" then\n                        lastinput = \"empty\"\n                        Screen.setScriptInput(lastinput)\n                    else\n                        lastinput = \"\"\n                        Screen.setScriptInput(lastinput)\n                    end\n                    if verbose == 1 then\n                        system.print(lastinput)\n                    end\n                    nomoreunits = 1\n                end\n            end\n\n            if tickcount == 4 then\n                if MU3 ~= nil then\n                    local mustatus = MU3.getStatus()\n                    local mutimeleft = MU3.getRemainingTime()\n                    local muoreid = system.getItem(MU3.getActiveOre())[\"locDisplayName\"]\n                    local muoreicon = system.getItem(MU3.getActiveOre())[\"iconPath\"]\n                    local mubaserate = MU3.getBaseRate()\n                    local mueff = MU3.getEfficiency()\n                    local muadjbonus = MU3.getAdjacencyBonus()\n                    local mucalrate = MU3.getCalibrationRate()\n                    local muoptimum = MU3.getOptimalRate()\n                    local muprodrate = MU3.getProductionRate()\n                    local mutimesincecal = MU3.getLastExtractionTime()\n                    local muoretier = system.getItem(MU1.getActiveOre())[\"tier\"]\n                    local MU3string = mustatus .. \",\" .. mutimeleft .. \",\" .. muoreid .. \",\" .. muoreicon .. \",\" .. mubaserate .. \",\" .. mueff .. \",\" .. muadjbonus .. \",\" .. mucalrate .. \",\" .. muoptimum .. \",\" .. muprodrate .. \",\" .. mutimesincecal .. \",\" .. muoretier\n                    Screen.setScriptInput(MU3string)\n                    if verbose == 1 then\n                        system.print(MU3string)\n                    end\n                else\n                    if lastinput == \"\" then\n                        lastinput = \"empty\"\n                        Screen.setScriptInput(lastinput)\n                    else\n                        lastinput = \"\"\n                        Screen.setScriptInput(lastinput)\n                    end\n                    if verbose == 1 then\n                        system.print(lastinput)\n                    end\n                    nomoreunits = 1\n                end\n            end\n\n            if tickcount == 5 then\n                if MU4 ~= nil then\n                    local mustatus = MU4.getStatus()\n                    local mutimeleft = MU4.getRemainingTime()\n                    local muoreid = system.getItem(MU4.getActiveOre())[\"locDisplayName\"]\n                    local muoreicon = system.getItem(MU4.getActiveOre())[\"iconPath\"]\n                    local mubaserate = MU4.getBaseRate()\n                    local mueff = MU4.getEfficiency()\n                    local muadjbonus = MU4.getAdjacencyBonus()\n                    local mucalrate = MU4.getCalibrationRate()\n                    local muoptimum = MU4.getOptimalRate()\n                    local muprodrate = MU4.getProductionRate()\n                    local mutimesincecal = MU4.getLastExtractionTime()\n                    local muoretier = system.getItem(MU1.getActiveOre())[\"tier\"]\n                    local MU4string = mustatus .. \",\" .. mutimeleft .. \",\" .. muoreid .. \",\" .. muoreicon .. \",\" .. mubaserate .. \",\" .. mueff .. \",\" .. muadjbonus .. \",\" .. mucalrate .. \",\" .. muoptimum .. \",\" .. muprodrate .. \",\" .. mutimesincecal .. \",\" .. muoretier\n                    Screen.setScriptInput(MU4string)\n                    if verbose == 1 then\n                        system.print(MU4string)\n                    end\n                else\n                    if lastinput == \"\" then\n                        lastinput = \"empty\"\n                        Screen.setScriptInput(lastinput)\n                    else\n                        lastinput = \"\"\n                        Screen.setScriptInput(lastinput)\n                    end\n                    if verbose == 1 then\n                        system.print(lastinput)\n                    end\n                    nomoreunits = 1\n                end\n            end\n\n            if tickcount == 6 then\n                if MU5 ~= nil then\n                    local mustatus = MU5.getStatus()\n                    local mutimeleft = MU5.getRemainingTime()\n                    local muoreid = system.getItem(MU5.getActiveOre())[\"locDisplayName\"]\n                    local muoreicon = system.getItem(MU5.getActiveOre())[\"iconPath\"]\n                    local mubaserate = MU5.getBaseRate()\n                    local mueff = MU5.getEfficiency()\n                    local muadjbonus = MU5.getAdjacencyBonus()\n                    local mucalrate = MU5.getCalibrationRate()\n                    local muoptimum = MU5.getOptimalRate()\n                    local muprodrate = MU5.getProductionRate()\n                    local mutimesincecal = MU5.getLastExtractionTime()\n                    local muoretier = system.getItem(MU1.getActiveOre())[\"tier\"]\n                    local MU5string = mustatus .. \",\" .. mutimeleft .. \",\" .. muoreid .. \",\" .. muoreicon .. \",\" .. mubaserate .. \",\" .. mueff .. \",\" .. muadjbonus .. \",\" .. mucalrate .. \",\" .. muoptimum .. \",\" .. muprodrate .. \",\" .. mutimesincecal .. \",\" .. muoretier\n                    Screen.setScriptInput(MU5string)\n                    if verbose == 1 then\n                        system.print(MU5string)\n                    end\n                else\n                    if lastinput == \"\" then\n                        lastinput = \"empty\"\n                        Screen.setScriptInput(lastinput)\n                    else\n                        lastinput = \"\"\n                        Screen.setScriptInput(lastinput)\n                    end\n                    if verbose == 1 then\n                        system.print(lastinput)\n                    end\n                    nomoreunits = 1\n                end\n            end\n\n            if tickcount == 7 then\n                if MU6 ~= nil then\n                    local mustatus = MU6.getStatus()\n                    local mutimeleft = MU6.getRemainingTime()\n                    local muoreid = system.getItem(MU6.getActiveOre())[\"locDisplayName\"]\n                    local muoreicon = system.getItem(MU6.getActiveOre())[\"iconPath\"]\n                    local mubaserate = MU6.getBaseRate()\n                    local mueff = MU6.getEfficiency()\n                    local muadjbonus = MU6.getAdjacencyBonus()\n                    local mucalrate = MU6.getCalibrationRate()\n                    local muoptimum = MU6.getOptimalRate()\n                    local muprodrate = MU6.getProductionRate()\n                    local mutimesincecal = MU6.getLastExtractionTime()\n                    local muoretier = system.getItem(MU1.getActiveOre())[\"tier\"]\n                    local MU6string = mustatus .. \",\" .. mutimeleft .. \",\" .. muoreid .. \",\" .. muoreicon .. \",\" .. mubaserate .. \",\" .. mueff .. \",\" .. muadjbonus .. \",\" .. mucalrate .. \",\" .. muoptimum .. \",\" .. muprodrate .. \",\" .. mutimesincecal .. \",\" .. muoretier\n                    Screen.setScriptInput(MU6string)\n                    if verbose == 1 then\n                        system.print(MU6string)\n                    end\n                else\n                    if lastinput == \"\" then\n                        lastinput = \"empty\"\n                        Screen.setScriptInput(lastinput)\n                    else\n                        lastinput = \"\"\n                        Screen.setScriptInput(lastinput)\n                    end\n                    if verbose == 1 then\n                        system.print(lastinput)\n                    end\n                    nomoreunits = 1\n                end\n            end\n\n            if tickcount == 8 then\n                if MU7 ~= nil then\n                    local mustatus = MU7.getStatus()\n                    local mutimeleft = MU7.getRemainingTime()\n                    local muoreid = system.getItem(MU7.getActiveOre())[\"locDisplayName\"]\n                    local muoreicon = system.getItem(MU7.getActiveOre())[\"iconPath\"]\n                    local mubaserate = MU7.getBaseRate()\n                    local mueff = MU7.getEfficiency()\n                    local muadjbonus = MU7.getAdjacencyBonus()\n                    local mucalrate = MU7.getCalibrationRate()\n                    local muoptimum = MU7.getOptimalRate()\n                    local muprodrate = MU7.getProductionRate()\n                    local mutimesincecal = MU7.getLastExtractionTime()\n                    local muoretier = system.getItem(MU1.getActiveOre())[\"tier\"]\n                    local MU7string = mustatus .. \",\" .. mutimeleft .. \",\" .. muoreid .. \",\" .. muoreicon .. \",\" .. mubaserate .. \",\" .. mueff .. \",\" .. muadjbonus .. \",\" .. mucalrate .. \",\" .. muoptimum .. \",\" .. muprodrate .. \",\" .. mutimesincecal .. \",\" .. muoretier\n                    Screen.setScriptInput(MU7string)\n                    if verbose == 1 then\n                        system.print(MU7string)\n                    end\n                else\n                    if lastinput == \"\" then\n                        lastinput = \"empty\"\n                        Screen.setScriptInput(lastinput)\n                    else\n                        lastinput = \"\"\n                        Screen.setScriptInput(lastinput)\n                    end\n                    if verbose == 1 then\n                        system.print(lastinput)\n                    end\n                    nomoreunits = 1\n                end\n            end\n            if tickcount == 9 then\n                nomoreunits = 1\n            end\n        else\n            Screen.setScriptInput(\"\")\n        end\n    else\n        Screen.setScriptInput(\"\")\n    end\n    if nomoreunits == 1 then\n        unit.stopTimer(\"main\")\n        unit.setTimer(\"refresh\",3)\n        tickcount = 2\n        Screen.setScriptInput(\"\")\n    end\n    if verbose == 1 then\n        system.print(tickcount)\n    end\nend\nrefreshed = 0","filter":{"args":[{"value":"main"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"9"},{"code":"tickcount = -1\nnomoreunits = 0\nScreen.setScriptInput(\"refresh\")\nif verbose == 1 then\n    system.print(\"refresh\")\nend\nrefreshed = 0\nunit.stopTimer(\"refresh\")\nunit.setTimer(\"main\",1/60)","filter":{"args":[{"value":"refresh"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"10"}],"methods":[],"events":[]}